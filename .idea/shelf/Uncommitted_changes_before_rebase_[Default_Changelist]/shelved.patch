Index: app/src/main/java/com/example/bookmyshow/LoginScreen.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.bookmyshow;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.bookmyshow.Home.HomeActivity;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.AccessTokenTracker;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.FacebookSdk;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\n\r\n\r\npublic class LoginScreen extends AppCompatActivity {\r\n\r\n    private static final int RC_SIGN_IN = 99;\r\n    private static final String TAG = \"GoogleLogin\";\r\n    private FirebaseAuth mAuth;\r\n    private Button btnLoginWithEmail, btnLoginWithGoogle, btnLoginWithFacebook;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    private CallbackManager callbackManager;\r\n    private FirebaseAuth firebaseAuth;\r\n    private LoginButton loginButton;\r\n    private FirebaseAuth.AuthStateListener authStateListener;\r\n    private AccessTokenTracker accessTokenTracker;\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        FirebaseUser user = mAuth.getCurrentUser();\r\n        if (user != null) {\r\n            Intent intent = new Intent(LoginScreen.this, HomeActivity.class);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login_screen);\r\n\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n        callbackManager = CallbackManager.Factory.create();\r\n\r\n        loginWithGoogle();\r\n        initViews();\r\n\r\n        loginButton.registerCallback(callbackManager, new FacebookCallback<LoginResult>() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                Log.d(TAG, \"onSuccess\" + loginResult);\r\n                HandleFacebookToken(loginResult.getAccessToken());\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void initViews() {\r\n        loginButton = findViewById(R.id.login_button);\r\n        btnLoginWithFacebook = findViewById(R.id.btnFacebook);\r\n        btnLoginWithEmail = findViewById(R.id.btnLoginWithEmail);\r\n        btnLoginWithGoogle = findViewById(R.id.btnLoginWithGoogle);\r\n        btnLoginWithGoogle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                signIn();\r\n            }\r\n        });\r\n        btnLoginWithFacebook.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                loginButton.performClick();\r\n            }\r\n        });\r\n\r\n        btnLoginWithEmail.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void HandleFacebookToken(AccessToken token) {\r\n        Log.d(TAG, \"HandleFacebookToken\" + token);\r\n        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n        firebaseAuth.signInWithCredential(credential).addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<AuthResult> task) {\r\n                if (task.isSuccessful()) {\r\n                    Log.d(TAG, \"Sign in credential successful\");\r\n                    FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                    Toast.makeText(LoginScreen.this, \"Facebook Login Successful\", Toast.LENGTH_SHORT).show();\r\n                    Intent intent = new Intent(LoginScreen.this, HomeActivity.class);\r\n                    startActivity(intent);\r\n                } else {\r\n                    Log.d(TAG, \"Sign in credential successful: Failed\");\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        authStateListener = new FirebaseAuth.AuthStateListener() {\r\n            @Override\r\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                FirebaseUser user = firebaseAuth.getCurrentUser();\r\n                if (user != null) {\r\n                    updateUI(user);\r\n                } else {\r\n                    updateUI(null);\r\n                }\r\n            }\r\n        };\r\n\r\n        accessTokenTracker = new AccessTokenTracker() {\r\n            @Override\r\n            protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken currentAccessToken) {\r\n                if (currentAccessToken == null) {\r\n                    firebaseAuth.signOut();\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n    private void loginWithGoogle() {\r\n        // Configure Google Sign In\r\n\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n\r\n        // Build a GoogleSignInClient with the options specified by gso.\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n    }\r\n\r\n    private void signIn() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        // Result returned from launching the Intent from GoogleSignInApi.getSignInIntent(...);\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            try {\r\n                // Google Sign In was successful, authenticate with Firebase\r\n                GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                Log.d(TAG, \"firebaseAuthWithGoogle:\" + account.getId());\r\n                firebaseAuthWithGoogle(account.getIdToken());\r\n            } catch (ApiException e) {\r\n                // Google Sign In failed, update UI appropriately\r\n                Log.w(TAG, \"Google sign in failed\", e);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            // Sign in success, update UI with the signed-in user's information\r\n                            Log.d(TAG, \"signInWithCredential:success\");\r\n                            FirebaseUser user = mAuth.getCurrentUser();\r\n                            Toast.makeText(LoginScreen.this, \"Login Successful\", Toast.LENGTH_SHORT).show();\r\n                            Intent intent = new Intent(LoginScreen.this, HomeActivity.class);\r\n                            startActivity(intent);\r\n                        } else {\r\n                            // If sign in fails, display a message to the user.\r\n                            Log.w(TAG, \"signInWithCredential:failure\", task.getException());\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void updateUI(FirebaseUser user) {\r\n        if (user != null) {\r\n            Log.d(TAG, \"Fetch Data\");\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/bookmyshow/LoginScreen.java b/app/src/main/java/com/example/bookmyshow/LoginScreen.java
--- a/app/src/main/java/com/example/bookmyshow/LoginScreen.java	(revision 43ce4d9b093431fa2de5d7dddad98fc67a2bacff)
+++ b/app/src/main/java/com/example/bookmyshow/LoginScreen.java	(date 1629887708478)
@@ -175,7 +175,6 @@
         startActivityForResult(signInIntent, RC_SIGN_IN);
     }
 
-
     @Override
     public void onActivityResult(int requestCode, int resultCode, Intent data) {
         callbackManager.onActivityResult(requestCode, resultCode, data);
